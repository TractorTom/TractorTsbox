A Faire :

Urgent pour faire fonctionner le package :


Développement à venir :

- 1) Création de vignettes. Idées :
    - Expliquer les types d'objets attendus (pour expliquer les erreurs) :
        - Format de date :
            - Date (base R)
            - date_ts (fonctionne avec une fréquence)
            - TimeUnits
            - Fonction de conversion, de comparaison
        - Objet ts attendu :
            - Type, Contenu ?
            - fréquences ?
            - Structure et date ?
            - Fonctions de modification
        - Fonctions de tests : s'inspirent du package checkmate (extension de checkmate) et ont pour but de sortir des erreurs (ce sont des assert et non des test ou des checks)
    - Chercher comment faire des liens entre doc de fonction et vignettes
- 2) Création et relecture des tests :
    - Créer des messages d'erreur + warning dans helper personnalisés avec noms de variable et pour tous les test
    - Ajouter des tests sur libelés et libelé_one_date avec plusieurs dates pour tester.
    - Refaire les tests qui manquent :
        - getValue_ts
        - date2date_ts
        - substr_year
        - date_ts2date
        - previous_date_ts
        - next_date_ts
        - firstDate
        - lastDate
        - is_before
        - diff_periode
        - extend_ts
        - na_trim
        - assert_TimeUnits
        - assert_frequency
        - assert_scalar_integer
        - assert_scalar_natural
        - assert_scalar_date
    - Refaire test-format_date_ts
    - Compléter le check de test-assert_date_ts pour ajouter :
        - des check sur les frequency
        - des checks que le résultats output (lrsqu'il y a des warning soit bien égale à la version integer des inputs double)
    - Faire le tour des fonctions pour lesquelles il manque des tests
    - Itérer sur TOUS les arguments valides (exemple tous les ts avec toutes les
    fréquences, start, len, typeA.. pour un type d'erreur)
- 3) Relire les commentaire Roxygen2 :
    - Dans la partie @detail, détailler le calcul qui permet de sortir cette valeur.
    - Ajouter une partie @description pour expliquer ce que fait la fonction
    - Faire le tour des tags que l'on pourrait ajouter comme doc
- 4) Approfondir la doc :
    - Relire les docs existantes (pour ré-écrire / compléter)
    - Doc existante : ajouter le default des arguments
    - Faire le tour des fonctions non documentées (les répertorier)
- 5) Ajouter un test de couverture globale avec le package covr (lien test et doc) + devtools::test_coverage() (ce qui revient au même)
- 6) Ajouter un test de temporalConsistence (faire la recherche dans le pkg) et le renommer (temporal coherence ?)
    - chercher des cas où la fréquence est la même et où il y a quand même des pb de cohérence temporelle
- 7) Faire le lien entre lastDate et na_trim (pour essayer d'appliquer l'un à l'autre...)
    - vérifier les check dans lastDate
- 8) regarder les projets de théo leroy pour voir si il fixe une librairie temporaire autrepart dans sont projet pour installer les packages 1 fois (sans les installer à chaque fois)
    - checker le fichier .Renviron aussi
- 9) Se renseigner sur la manière de faire du renv sur AUS + session avec gestion de cache
- 10) getValue_ts, proposer date_from et date_to pour spécifier les dates pendant lesquelles on veut extraire les valeurs d'un ts


Idée pour plus tard :

- 1) Compléter le fuzzing avec d'autres objets R (regarder d'autres sources /
packages ?)
- 2) Ajouter des Quasiquotation !! (bang-bang) pour mieux tester et analyser les
    erreurs (notamment avec des précisions sur les inputs, ...)
- 3) Trouver un moyen de faire un CI/CD
    - sur gitlab.insee :
        - interlocuteurs : Julien Jamme, Théo Leroy, Pierre-Yves Berrard
        - https://gitlab.insee.fr/dsct/ica/rmonica/-/tree/main/
        - https://gitlab.insee.fr/ecmoss-self/fichiers-info/pkg-fier/
        - https://gitlab.insee.fr/demographie-entreprises/sine/pkg-sine
        - Chercher le tag r-package sur gitlab
    - sur le gitlab du SSP cloud (datalab et git.lab)
- 4) Se renseigner au sujet des traductions :
    - https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#R-messages
    - https://r-pkgs.org/misc.html#other-directories
    - https://michaelchirico.github.io/potools/
- 5) Faire une recherche de toutes les classes "atomic" connues et vérifier lesquelles fonctionnent ou non avec des ts (pour étendre ou créer simplement des ts)
- 6) Faire l'inventaire des if () stop() qui ne sont pas remplacer par du checkmate pour trouver l'équivalent checkmate à mettre à la place. (Par exemplepour tester que 2 objets sont de même signe)
- 7) Mettre en place un fichier de NEWS (usethis::use_news_md())
- 8) Concernant les checks, regarder les fonctions + check suivants :
    - le package rhub
    - le package goodpractice
    - le package inteRgrate
    - tous les tests de devtools (devtools::check_mac_release(), win_release, ...)
    - CRAN specific check
    - Faire une fiche avec tous les check existants et dans quel ordre les effectuer :
        - https://www.marinedatascience.co/blog/2020/01/09/checklist-for-r-package-re-submissions-on-cran/
        - https://www.r-bloggers.com/2020/07/how-to-write-your-own-r-package-and-publish-it-on-cran/
- 9) Lire https://r-pkgs.org/
- 10) Faire un hexagone
- 11) Ajouter le + de badges possible sur le github
- 12) Faire un pkgdown
- 13) Ajouter un readme
- 14) Ajouter des options warn dans les fonctions pour ajouter (oui ou non) des warnings

